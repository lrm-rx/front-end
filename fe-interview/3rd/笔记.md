## 箭头函数

### 不适合用箭头函数的场景

- 对象方法
- 对象原型
- 构造函数
- 动态上下文的回调函数
- Vue生命周期



## TCP三次握手和四次挥手

### 建立TCP连接

- 先建立连接(确保双方都有收发消息的能力)
- 再传输内容(如发送给一个get请求)
- 网络连接是TCP协议,传输内容是HTTP协议

## for in 和 for of

### 适用于不同的数据类型

- 遍历对象: for in 可以, for of 不可以
- 遍历Map Set: for of可以, for in 不可以
- 遍历generator: for of可以, for in不可以

## 可枚举 vs 可迭代

- for ... in用于**可枚举**数据, 如对象, 数组, 字符串, 得到key
- for ... of 用于**可迭代**数据, 如数组, 字符串, Map, Set, 得到value

## for await ... of作用

- for await ... of用于遍历多个Promise, 是Promise.all的替代品



## offset/client/scroll

- offsetHeight offsetWidth: border + padding + content
- clientHeight clientWidth: padding + content
- scrollHeight scrollWidth: padding + 实际内容尺寸



## HTMLCollection 和 NodeList区别

- HTMLCollection是Element的集合
- NodeList是Node的集合

### Node和Element

- DOM是一棵树, 所有节点都是Node
- Node 是Element的基类
- Element是其他HTML元素的基类,如HTMLDivElement

## 扩展: 类数组 --> 数组

```
const arr1 = Array.from(list)
const arr2 = Array.prototype.slice.call(list)
const arr3 = [...list]
```



## Vue computed和watch区别

### 两者用途不同

- computed用于计算产生新的数据, 有缓存
- watch用于监听现有数据

> computed是有缓存的(特点, 不是区别, 因为他们用途不同, 不能算是区别)
>
> method没有缓存



## Vue组件通讯的方式 - 需要补充一下

- props和$emit
- 自定义事件
- $attrs    $listeners(vue2, vue3中合并到了$attrs)
- $parent
- $refs
- provide/inject
- Vuex



## Vuex mutation action区别

- mutation: 原子操作;必须同步代码;
- action: 可包含多个mutation; 可包含异步代码;



## JS严格模式特点

- 全局变量必须先声明
- 禁止使用with
- 创建eval作用域
- 禁止this指向window
- 函数参数不能重名



## HTTP跨域请求时为什么发送options请求

- options请求, 是跨域请求之前的预检查
- 浏览器自行发起的, 无需人为干预
- 不会影响实际的功能

# 知识深度

## JS内存泄漏如何检测?场景有哪些?

- 检测: Performance - 勾选Memory录制, 查看HEAP

- 场景(Vue为例):

  > - 被全局变量,函数引用, 组件销毁时未清除
  > - 被全局事件, 定时器引用, 组件销毁时未清除
  > - 被自定义事件引用, 组件销毁时未清除

  > WeakMap WeakSet 弱引用

### 使用的算法

- 引用计数(之前)
- 标记清除(现代)



## 单线程和异步

- JS 是单线程的(无论在浏览器还是nodejs)
- 浏览器中JS执行和DOM渲染共用一个线程
- 异步



## 宏任务和微任务

- 宏任务: setTimeout  setInterval  网络请求等 
- 微任务: promise  async/await
- 微任务在下一轮DOM渲染之前执行, 宏任务在之后执行



## nodejs异步

- Nodejs同样使用ES语法, 也是单线程, 也需要异步
- 异步任务也分: 宏任务 + 微任务
- 但是, 它的宏任务和微任务, 分不同类型, 有不同优先级 

## vdom真的很快吗

- vdom并不快, JS直接操作DOM才是最快的
- 但"数据驱动视图"要有合适的技术方案, 不能全部DOM重新
- vdom就是目前最合适的技术方案(并不是因为它快, 而是合适)



## 遍历数组, for和forEach哪个快?

- for更快
- forEach每次都要创建一个函数来调用, 而for不会创建函数
- 函数需要独立的作用域, 会有额外的开销
- 越"低级"的代码, 性能往往越好



## nodejs如何开启进程,进程如何通讯?

- 开启子进程child_process.fork和cluster.fork
- 使用send和on传递消息

### 进程process vs 线程 thread

- 进程, OS进行资源分配和调度的最小单位, 有独立内存空间
- 线程, OS进行运算调度的最小单位, 共享进程内存空间
- JS是单线程的,但可以开启多进程执行, 如WebWorker



## 什么是JS Bridge

- JS无法直接调用native API
- 需要通过一些特定的"格式" 来调用
- 这些"格式"就统称JS-Bridge, 例如微信JSSDK



## JS Bridge的常见实现方式

- 注册全局API
- URL Scheme
- 